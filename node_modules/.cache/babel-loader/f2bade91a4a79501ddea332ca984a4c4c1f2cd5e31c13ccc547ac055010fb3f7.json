{"ast":null,"code":"import _toConsumableArray from\"/Users/scotthenry/Development/code/phase-2/phase2-group-project/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/scotthenry/Development/code/phase-2/phase2-group-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useState}from\"react\";import{Route,Switch}from\"react-router-dom\";import Header from\"./Header\";import Login from\"./Login\";import MyBooks from\"./MyBooks\";import HomePage from\"./HomePage\";import About from\"./About\";import NewBookForm from\"./NewBookForm\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),books=_useState2[0],setBooks=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),currentUser=_useState4[0],setCurrentUser=_useState4[1];var addBookToState=function addBookToState(bookObj){setBooks([].concat(_toConsumableArray(books),[bookObj]));};function checkOutBook(book){var updatedBooks=books.map(function(bookObj){if(bookObj.id===book.id){bookObj.owner=currentUser;return bookObj;}else{return bookObj;}});fetch(\"http://localhost:6001/books/\".concat(book.id),{method:'PATCH',headers:{'Content-type':'application/json'},body:JSON.stringify({owner:currentUser})});setBooks(updatedBooks);}function returnBook(book){var updatedBooks=books.map(function(bookObj){if(bookObj.owner===currentUser&&currentUser!==\"\"&&bookObj.id===book.id){console.log('Changing the owner in upDatedBooks');console.log(bookObj.owner);console.log(currentUser);bookObj.owner=\"\";return bookObj;}else{return bookObj;}});fetch(\"http://localhost:6001/books/\".concat(book.id),{method:'PATCH',headers:{'Content-type':'application/json'},body:JSON.stringify({owner:\"\"})});setBooks(updatedBooks);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{currentUser:currentUser}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/login\",children:/*#__PURE__*/_jsx(Login,{currentUser:currentUser,setCurrentUser:setCurrentUser})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/mybooks\",children:/*#__PURE__*/_jsx(MyBooks,{books:books,setBooks:setBooks,currentUser:currentUser,returnBook:returnBook})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/newbook\",children:/*#__PURE__*/_jsx(NewBookForm,{currentUser:currentUser,addBookToState:addBookToState})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/about\",children:/*#__PURE__*/_jsx(About,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",children:/*#__PURE__*/_jsx(HomePage,{books:books,setBooks:setBooks,currentUser:currentUser,checkOutBook:checkOutBook})})]})]});}export default App;","map":{"version":3,"names":["React","useState","Route","Switch","Header","Login","MyBooks","HomePage","About","NewBookForm","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","books","setBooks","_useState3","_useState4","currentUser","setCurrentUser","addBookToState","bookObj","concat","_toConsumableArray","checkOutBook","book","updatedBooks","map","id","owner","fetch","method","headers","body","JSON","stringify","returnBook","console","log","children","exact","path"],"sources":["/Users/scotthenry/Development/code/phase-2/phase2-group-project/src/components/App.js"],"sourcesContent":["import React from \"react\";\nimport { useState } from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport Header from \"./Header\";\nimport Login from \"./Login\";\nimport MyBooks from \"./MyBooks\";\nimport HomePage from \"./HomePage\";\nimport About from \"./About\";\nimport NewBookForm from \"./NewBookForm\";\n\nfunction App() {\n  \n  const [books, setBooks] = useState([])\n  const [currentUser, setCurrentUser] = useState('')\n\n  const addBookToState = bookObj => {\n    setBooks( [ ...books, bookObj ] )\n  }\n\n\n  function checkOutBook(book) {\n\n    const updatedBooks = books.map(bookObj => {\n      if ((bookObj.id) === (book.id)) {\n        bookObj.owner = currentUser;\n        return bookObj;\n      } else {\n        return bookObj;\n      }\n    });\n\n     fetch(`http://localhost:6001/books/${book.id}`, {\n        method: 'PATCH',\n        headers: {\n          'Content-type': 'application/json',\n        },\n        body: JSON.stringify({\n          owner: currentUser\n      }),\n      });\n      \n      setBooks(updatedBooks);\n  }\n\n  function returnBook(book) {\n    \n    const updatedBooks = books.map(bookObj => {\n      if ((bookObj.owner === currentUser) && (currentUser !== \"\") && (bookObj.id === book.id)) {\n        console.log('Changing the owner in upDatedBooks');\n        console.log(bookObj.owner);\n        console.log(currentUser);\n        bookObj.owner = \"\";\n        return bookObj;\n      } else {\n        return bookObj;\n      }\n    });\n\n     fetch(`http://localhost:6001/books/${book.id}`, {\n        method: 'PATCH',\n        headers: {\n          'Content-type': 'application/json',\n        },\n        body: JSON.stringify({\n          owner: \"\"\n      }),\n      });\n      \n      setBooks(updatedBooks);\n  }\n\n  return (\n    <div>       \n      <Header currentUser={currentUser}/>\n      <Switch>\n        <Route exact path=\"/login\">\n          <Login currentUser={currentUser} setCurrentUser={setCurrentUser}/>\n        </Route>\n          <Route exact path=\"/mybooks\">\n        <MyBooks books={books} setBooks={setBooks} currentUser={currentUser} returnBook={returnBook}/>\n        </Route>\n        <Route exact path=\"/newbook\">\n          <NewBookForm currentUser={currentUser} addBookToState={addBookToState}/>\n        </Route>\n        <Route exact path=\"/about\">\n          <About />\n        </Route>\n        <Route exact path=\"/\">\n          <HomePage books={books} setBooks={setBooks} currentUser={currentUser} checkOutBook={checkOutBook} />\n        </Route>\n      </Switch>\n    </div>\n    );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}